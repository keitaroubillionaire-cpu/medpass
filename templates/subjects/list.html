{% extends "base.html" %}

{% block title %}科目一覧 - MedPass{% endblock %}

{% block content %}
<h1>科目一覧</h1>

<div class="form-section">
    <h2>新規科目追加</h2>
    <form action="/subjects/create" method="post" class="inline-form">
        <input type="text" name="name" placeholder="科目名" required>
        <button type="submit" class="btn btn-primary">追加</button>
    </form>
</div>

<div class="list-section">
    {% if subjects %}
    <table class="data-table">
        <thead>
            <tr>
                <th>科目名</th>
                <th>講義数</th>
                <th>作成日</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for subject in subjects %}
            <tr>
                <td><a href="/subjects/{{ subject.id }}">{{ subject.name }}</a></td>
                <td>{{ subject.lectures|length }}</td>
                <td>{{ subject.created_at.strftime('%Y/%m/%d') }}</td>
                <td>
                    <a href="/subjects/{{ subject.id }}" class="btn btn-small">詳細</a>
                    <form action="/subjects/{{ subject.id }}/delete" method="post" style="display: inline;">
                        <button type="submit" class="btn btn-small btn-danger" onclick="return confirm('本当に削除しますか？')">削除</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="empty-state">まだ科目がありません。上のフォームから追加してください。</p>
    {% endif %}
</div>
{% endblock %}
